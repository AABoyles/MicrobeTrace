!function(){"use strict";function e(e,o,i){i||(i="AVERAGE");const r=Math.min(e.length,o.length);let n=0,s=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];if("SKIP"==i)for(let f=0;f<r;f++){let l=t[e.charCodeAt(f)],i=t[o.charCodeAt(f)];l<4&&i<4&&(s[l][i]+=1)}else if("GAPMM"==i)for(let i=0;i<r;i++){let r=t[e.charCodeAt(i)],n=t[o.charCodeAt(i)];if(r<4&&n<4)s[r][n]+=1;else{if(17==r||17==n){if(17==r&&17==n)continue;17==r?r=15:n=15}if(r<4){if(l[n]>0)for(let e=0;e<4;e++)f[n][e]&&(s[r][e]+=l[n])}else if(n<4){if(l[r]>0)for(let e=0;e<4;e++)f[r][e]&&(s[e][n]+=l[r])}else{let e=l[r]*l[n];if(e>0)for(let t=0;t<4;t++)if(f[r][t])for(let l=0;l<4;l++)f[n][l]&&(s[t][l]+=e)}}}else if("RESOLVE"==i)for(let i=0;i<r;i++){let r=t[e.charCodeAt(i)],n=t[o.charCodeAt(i)];if(r<4&&n<4)s[r][n]+=1;else{if(17==r||17==n)continue;if(r<4){if(l[n]>0){if(f[n][r]){s[r][r]+=1;continue}for(let e=0;e<4;e++)f[n][e]&&(s[r][e]+=l[n])}}else if(n<4){if(l[r]>0){if(f[r][n]){s[n][n]+=1;continue}for(let e=0;e<4;e++)f[r][e]&&(s[e][n]+=l[r])}}else{let e=l[r]*l[n];if(e>0){let t=0;positive_match=[!1,!1,!1,!1];for(let e=0;e<4;e++)f[r][e]&&f[n][e]&&(t++,positive_match[e]=!0);if(t>0){norm2=1/t;for(let e=0;e<4;e++)positive_match[e]&&(s[e][e]+=norm2);continue}for(let t=0;t<4;t++)if(f[r][t])for(let l=0;l<4;l++)f[n][l]&&(s[t][l]+=e)}}}}else for(let i=0;i<r;i++){let r=t[e.charCodeAt(i)],n=t[o.charCodeAt(i)];if(r<4&&n<4)s[r][n]+=1;else{if(17==r||17==n)continue;if(r<4){if(l[n]>0)for(let e=0;e<4;e++)f[n][e]&&(s[r][e]+=l[n])}else if(n<4){if(l[r]>0)for(let e=0;e<4;e++)f[r][e]&&(s[e][n]+=l[r])}else{let e=l[r]*l[n];if(e>0)for(let t=0;t<4;t++)if(f[r][t])for(let l=0;l<4;l++)f[n][l]&&(s[t][l]+=e)}}}let c=[0,0,0,0];for(let e=0;e<4;e++)for(let t=0;t<4;t++)c[e]+=s[e][t],c[t]+=s[e][t];let h=2/(c[0]+c[1]+c[2]+c[3]),a=(s[0][2]+s[2][0])*h,u=(s[1][3]+s[3][1])*h,A=1-((s[0][0]+s[1][1]+s[2][2]+s[3][3])*h+a+u);if(0==c[0]||0==c[1]||0==c[2]||0==c[3])a=1-2*(a+u)-A,u=1-2*A,n=a>0&&u>0?-.5*Math.log(a)-.25*Math.log(u):1;else{const e=1/(c[0]+c[1]+c[2]+c[3]);let t=[0,0,0,0];for(let f=0;f<4;f++)t[f]=c[f]*e;const f=t[0]+t[2],l=t[1]+t[3],o=2*t[0]*t[2]/f,i=2*t[1]*t[3]/l,r=2*(f*l-t[0]*t[2]*l/f-t[1]*t[3]*f/l);a=1-a/o-.5*A/f,u=1-u/i-.5*A/l,A=1-.5*A/l/f,n=-o*Math.log(a)-i*Math.log(u)-r*Math.log(A)}return n}const t=Array(256).fill(16);t[45]=17,t[65]=0,t[66]=11,t[67]=1,t[68]=12,t[71]=2,t[72]=13,t[75]=9,t[77]=10,t[78]=15,t[82]=5,t[83]=7,t[84]=3,t[85]=4,t[86]=14,t[87]=8,t[89]=6,t[97]=0,t[98]=11,t[99]=1,t[100]=12,t[103]=2,t[104]=13,t[107]=9,t[109]=10,t[110]=15,t[114]=5,t[115]=7,t[116]=3,t[117]=4,t[118]=14,t[119]=8,t[121]=6,e.mapChar=t;const f=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1],[0,0,0,1],[1,0,1,0],[0,1,0,1],[0,1,1,0],[1,0,0,1],[0,0,1,1],[1,1,0,0],[0,1,1,1],[1,0,1,1],[1,1,0,1],[1,1,1,0],[1,1,1,1],[1,1,1,1],[0,0,0,0]];e.resolutions=f;const l=[1,1,1,1,1,.5,.5,.5,.5,.5,.5,.5,1/3,1/3,1/3,1/3,.25,.25,0];e.resolutionsCount=l,e.toInts=function(e){const f=e.length;let l=new Uint8Array(f);for(let o=0;o<f;o++)l[o]=t[e.charCodeAt(o)];return l},e.onInts=function(e,t,o){o||(o="AVERAGE");const i=Math.min(e.length,t.length);let r=0,n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];if("SKIP"==o)for(let f=0;f<i;f++){let l=e[f],o=t[f];l<4&&o<4&&(n[l][o]+=1)}else if("GAPMM"==o)for(let o=0;o<i;o++){let i=e[o],r=t[o];if(i<4&&r<4)n[i][r]+=1;else{if(17==i||17==r){if(17==i&&17==r)continue;17==i?i=15:r=15}if(i<4){if(l[r]>0)for(let e=0;e<4;e++)f[r][e]&&(n[i][e]+=l[r])}else if(r<4){if(l[i]>0)for(let e=0;e<4;e++)f[i][e]&&(n[e][r]+=l[i])}else{let e=l[i]*l[r];if(e>0)for(let t=0;t<4;t++)if(f[i][t])for(let l=0;l<4;l++)f[r][l]&&(n[t][l]+=e)}}}else if("RESOLVE"==o)for(let o=0;o<i;o++){let i=e[o],r=t[o];if(i<4&&r<4)n[i][r]+=1;else{if(17==i||17==r)continue;if(i<4){if(l[r]>0){if(f[r][i]){n[i][i]+=1;continue}for(let e=0;e<4;e++)f[r][e]&&(n[i][e]+=l[r])}}else if(r<4){if(l[i]>0){if(f[i][r]){n[r][r]+=1;continue}for(let e=0;e<4;e++)f[i][e]&&(n[e][r]+=l[i])}}else{let e=l[i]*l[r];if(e>0){let t=0;positive_match=[!1,!1,!1,!1];for(let e=0;e<4;e++)f[i][e]&&f[r][e]&&(t++,positive_match[e]=!0);if(t>0){norm2=1/t;for(let e=0;e<4;e++)positive_match[e]&&(n[e][e]+=norm2);continue}for(let t=0;t<4;t++)if(f[i][t])for(let l=0;l<4;l++)f[r][l]&&(n[t][l]+=e)}}}}else for(let o=0;o<i;o++){let i=e[o],r=t[o];if(i<4&&r<4)n[i][r]+=1;else{if(17==i||17==r)continue;if(i<4){if(l[r]>0)for(let e=0;e<4;e++)f[r][e]&&(n[i][e]+=l[r])}else if(r<4){if(l[i]>0)for(let e=0;e<4;e++)f[i][e]&&(n[e][r]+=l[i])}else{let e=l[i]*l[r];if(e>0)for(let t=0;t<4;t++)if(f[i][t])for(let l=0;l<4;l++)f[r][l]&&(n[t][l]+=e)}}}let s=[0,0,0,0];for(let e=0;e<4;e++)for(let t=0;t<4;t++)s[e]+=n[e][t],s[t]+=n[e][t];let c=2/(s[0]+s[1]+s[2]+s[3]),h=(n[0][2]+n[2][0])*c,a=(n[1][3]+n[3][1])*c,u=1-((n[0][0]+n[1][1]+n[2][2]+n[3][3])*c+h+a);if(0==s[0]||0==s[1]||0==s[2]||0==s[3])h=1-2*(h+a)-u,a=1-2*u,r=h>0&&a>0?-.5*Math.log(h)-.25*Math.log(a):1;else{const e=1/(s[0]+s[1]+s[2]+s[3]);let t=[0,0,0,0];for(let f=0;f<4;f++)t[f]=s[f]*e;const f=t[0]+t[2],l=t[1]+t[3],o=2*t[0]*t[2]/f,i=2*t[1]*t[3]/l,n=2*(f*l-t[0]*t[2]*l/f-t[1]*t[3]*f/l);h=1-h/o-.5*u/f,a=1-a/i-.5*u/l,u=1-.5*u/l/f,r=-o*Math.log(h)-i*Math.log(a)-n*Math.log(u)}return r},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.tn93=e):self.tn93=e}();
